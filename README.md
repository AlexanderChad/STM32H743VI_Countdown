# Проект таймера (обратного счетчика) до события (дата и время). STM32 + RGB HUB75 SM16126D + GPS.  
Вывод оставшегося времени происходит на 4 линии по 5 матриц (HUB75, RGB 16x16, SM16126D), т.е. на экран 80x64 пикселя. В верхней части по центру ширины `количество дней`, на нижней - `чч:мм:сс`.  

Поддерживаются режимы цвета отображения:  
- Режим постоянного цвета. Задается 3-bit RGB.  
- Режим автоматической смены цвета.  

Питание +5В плата расширения получает с разъема `Power`. Может быть запитана от линии 5В БП матриц, плата с STM32H743VI получает питание от платы расширения.  
Актуальное время получается от спутников с помощью любого GPS-модуля с выводом на UART сообщений стандарта NMEA (разъем `GPS`, Baud Rate: `9600`). Коррекция часового пояса задается настройками.  
Настройка производится отправкой команды вида `SET,+3,170222,120000,0,END\n` по UART (разъем `PC_UART`, Baud Rate: `115200`), где `+3` - utc_timezone (часовой пояс); `170222` - дата Event'а в формате DDMMYY; `120000` - время Event'а в формате HHMMSS; `0` - цвет, 0 - перебор цветов, 1-7 - фиксированный 3х-битный RGB-цвет. Настройки сохраняются во внутренней flash memory STM32H743VI.  

Разметка дисплея (рамки - места символов, бордовое обрамление - рамка держателя матриц, перекрывающая закрашенные светодиоды):  
![Разметка дисплея. Размер 1 к 1.](https://github.com/AlexanderChad/STM32H743VI_Countdown/blob/main/display_5x4_markup.png "Размер 1 к 1")

Печатная плата расширения:
![Плата расширения. Вид снизу, с компонентами.](https://github.com/AlexanderChad/STM32H743VI_Countdown/blob/main/pcb_b.png)
![Плата расширения. Вид сверху, с компонентами.](https://github.com/AlexanderChad/STM32H743VI_Countdown/blob/main/pcb_f.png)
![Плата расширения. Вид сверху, без компонентов.](https://github.com/AlexanderChad/STM32H743VI_Countdown/blob/main/pcb_f_nc.png)  

Схема подключения матриц (цифры - порядок записи в памяти, ПР - плата расширения, платы с STM32 и GPS не показаны в целях упрощения):  
![Порядок записи и схема подключения матриц.](https://github.com/AlexanderChad/STM32H743VI_Countdown/blob/main/display_5x4_addr.png)  
